<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <link href="../css/main.css" rel="stylesheet">
  <link href="../css/radiobutton.css" rel="stylesheet">
  <link href="../css/rangeInputs.css" rel="stylesheet">
  <title>Tesserace 3D Test</title>
  <!-- Can be ordered operations -->
  <script src="../lib/lodash-2.4.1.min.js"></script>
  <script type="text/javascript">
    var oldArray64 = window.Float64Array;
    window.Float64Array = window.Float32Array;
  </script>
  <link href="https://cdn.rawgit.com/band-x-media/SASS-Material-Design-for-Bootstrap/master/dist/material-bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="https://cdn.rawgit.com/band-x-media/SASS-Material-Design-for-Bootstrap/master/dist/material-bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="../lib/dot.min.js"></script>
  <script type="text/javascript">
    window.Float64Array = oldArray64;
  </script>
  <!-- END Can be ordered operations -->
</head>
<body>
  <div id="main-container">
    <div id="container-left">
      <canvas class="shadow" id="canvas" width="700" height="512"></canvas>
      <div id="statusContainer"><span id="status">Loading ...</span></div> 
    </div> <!-- container left end -->

    <div id="container-right">
      <div class="sticky-header">
        <ul class="nav nav-tabs nav-justified nav-tab-yellow" >
        <li class="nav-item active"><a data-toggle="tab" href="#home">Home</a></li>
        <li class="nav-item "><a data-toggle="tab" href="#menu1">Menu 1</a></li>
        <li class="nav-item "><a data-toggle="tab" href="#menu2">Menu 2</a></li>
        <li class="nav-item "><a data-toggle="tab" href="#menu3">Menu 3</a></li>
        </ul>
      </div> <!-- sticky header end -->

    <div class="tab-content">
      <div id="home" class="tab-pane fade in active animate">
        <div id="controls">
          <div class="neuB">Movement Controls</div>
          WASD for forwards/backwards/sideways motion, arrow keys to rotate, and Q/E to roll.
          <div class="h">Scene</div>
          <div class="radiobut">
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="sceneChoice" id="sceneCoffeeBox" checked />
              <label for="sceneCoffeeBox">Outdoors</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="sceneChoice" id="sceneIndoorBox" />
              <label for="sceneIndoorBox">Indoors</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="sceneChoice" id="sceneColorBox" />
              <label for="sceneColorBox">Color and Caustics</label>
            </div>
            <div class="radiobut-info">
                <input autocomplete="off" type="radio" name="sceneChoice" id="sceneTestBox" />
                <label for="sceneTestBox">Distance Field Experiment (slow!)</label>
            </div>
        </div>
        
        <div class="h">Tone Mapping</div>
        <div class="radiobut">
          <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="toneMap" id="linearBox" checked />
              <label for="linearBox">Linear</label>
          </div>
          <div class="radiobut-info">
            <input autocomplete="off" type="radio" name="toneMap" id="reinhardBox" />
            <label for="reinhardBox">Reinhard</label>
          </div>
          <div class="radiobut-info">
            <input autocomplete="off" type="radio" name="toneMap" id="filmicBox" />
            <label for="filmicBox">Filmic</label>
          </div>
        </div>
          
        <label for="brightness">Exposure</label>
        <div class="range range-info">
          <input autocomplete="off" id="brightnessSlider" name="brightness" type="range" min="0" max="500" value="100" step="1" onchange="rangeBrightness.value=value"/>
          <output id="rangeBrightness">100</output>
        </div>

        <div class="h">Depth of Field </div>
        (perspective only for now)
        <label for="dofSpread">Blur Amount</label>
        <div class="range range-info">
          <input autocomplete="off" id="dofSpreadSlider" name="dofSpread" type="range" min="0" max="500" value="0" step="1" onchange="rangeDofSpread.value=value" />
          <output id="rangeDofSpread">0</output>
        </div>
        <label for="focalLength">Focal Length</label>
        <div class="range range-info">
          <input autocomplete="off" id="focalLengthSlider" name="focalLength" type="range" min="0" max="1000" value="150" step="0.5" onchange="rangeFocalLength.value=value" />
          <output id="rangeFocalLength">150</output>
        </div>
        </div>
      </div>
       <!-- home tab end -->

      <div id="menu1" class="tab-pane fade animate">
        <div id="controls">
          <div class="h">Projection</div>
          <div class="radiobut">
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="projection" id="perspectiveBox" checked />
              <label for="perspectiveBox">Perspective</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="projection" id="stereographicBox" />
              <label for="stereographicBox">Stereographic</label>
            </div>
            <div class="h">Mouse Control</div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="mouseControl" id="mouseNoneBox" />
              <label for="mouseNoneBox">Nothing</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="mouseControl" id="mouseRotateBox" checked />
              <label for="mouseRotateBox">Rotate (around focal point)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="mouseControl" id="mouseFocusBox" />
              <label for="mouseFocusBox">Focus on point (when clicked or dragged)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="mouseControl" id="mouseLightBox" />
              <label for="mouseLightBox">Light at point (when clicked or dragged)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="mouseControl" id="mouseMakeDynamicBox" />
              <label for="mouseMakeDynamicBox">Drag spheres (not too many, shader uniforms limited)</label>
            </div>
          </div>
        </div>
      </div> 
      <!-- menu1 tab end -->

      <div id="menu2" class="tab-pane fade animate">
        <div id="controls">
          <div class="h">Environment</div>
          <div class="radiobut">
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envConstantBox" />
              <label for="envConstantBox">Constant (white/gray)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envWeirdBox" />
              <label for="envWeirdBox">Custom GLSL Expression</label>
            </div>
          

            <label>
              <input autocomplete="off" type="text" name="customGLSLText" id="customGLSLText" value="pow( abs( 1.0 + sin( 50.0 * asin( rayDir.x ) ) * sin( 50.0 * asin( rayDir.z ) ) ), 7.0 ) * 0.15" style="margin-left: 20px;"></input>
              <button id="updateCustomGLSLButton">Update</button>
            </label>

            HDR Skies downsampled from <a href="http://www.viz-people.com/portfolio/free-hdri-maps/">Vizpeople's free (non-commercial) environment maps</a>:

            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest01"/>
              <label for="envTest01" class="radiobutDouble">Sky 01 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest01x"/>
              <label for="envTest01x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest02"/>
              <label for="envTest02" class="radiobutDouble">Sky 02 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest02x"/>
              <label for="envTest02x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest03"/>
              <label for="envTest03" class="radiobutDouble">Sky 03 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest03x"/>
              <label for="envTest03x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest04" checked/>
              <label for="envTest04" class="radiobutDouble">Sky 04 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest04x"/>
              <label for="envTest04x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest05"/>
              <label for="envTest05" class="radiobutDouble">Sky 05 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest05x"/>
              <label for="envTest05x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest06"/>
              <label for="envTest06" class="radiobutDouble">Sky 06 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest06x"/>
              <label for="envTest06x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest07"/>
              <label for="envTest07" class="radiobutDouble">Sky 07 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest07x"/>
              <label for="envTest07x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest08"/>
              <label for="envTest08" class="radiobutDouble">Sky 08 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest08x"/>
              <label for="envTest08x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest09"/>
              <label for="envTest09" class="radiobutDouble">Sky 09 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest09x"/>
              <label for="envTest09x" class="radiobutDouble">(4096x1024)</label>
            </div>
            <div class="radiobut-info">
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest10"/>
              <label for="envTest10" class="radiobutDouble">Sky 10 (2048x512)</label>
              <input autocomplete="off" type="radio" name="environmentControl" id="envTest10x"/>
              <label for="envTest10x" class="radiobutDouble">(4096x1024)</label>
            </div>
         

          HDR Skies from <a href="hhttp://www.openfootage.net/">openfootage.net free (attribution) environment maps</a>:
          <div class="radiobut-info">
            <input autocomplete="off" type="radio" name="environmentControl" id="envDusk2048Box"/>
            <label for="envDusk2048Box">Dusk (2048x512)</label>
          </div>
         </div>

          <label for="environmentRotation">Rotation</label>
          <div class="range range-info">
          <input autocomplete="off" id="environmentRotationSlider" name="environmentRotation" type="range" min="0" max="360" value="297" step="0.5" onchange="rangeEnvironmentRotation.value=value" />
          <output id="rangeEnvironmentRotation">297</output>
          </div>
          <label for="environmentSunStrength">Extra Sun</label>
          <div class="range range-info">
          <input autocomplete="off" id="environmentSunStrengthSlider" name="environmentSunStrength" type="range" min="0" max="100" value="0" step="0.5" onchange="rangeEnvironmentSunStrength.value=value"/>
          <output id="rangeEnvironmentSunStrength">0</output>
          </div>

          <div class="h">Size</div>
          <button autocomplete="off" type="radio" name="sizeChoice" id="size256Box">256px</button>
          <button autocomplete="off" type="radio" name="sizeChoice" id="size512Box">512px</button>
          <button autocomplete="off" type="radio" name="sizeChoice" id="size1024Box">1024px</button>
        </div>
      </div>
      <!-- menu2 tab end -->

      <div id="menu3" class="tab-pane fade animate">
          <div id="controls">
          
          <div class="h">Future Thoughts</div>
        <ul>
          <li>Scale down to other aspect ratios / non-power-of-2-sizes</li>
          <li>Other tone mapping options (Reinhard)?</li>
          <li>Filtering to remove aliasing</li>
          <li>Improved importance sampling</li>
          <li>Bloom shader (mipmap down, blur with separable kernel at each stage after thresholding for brightness).</li>
          <li>Variance output (<a href="http://www.johndcook.com/standard_deviation.html">trackable with 2 floats</a>).</li>
          <li>HDRI export (<a href="http://concord-consortium.github.io/lab/experiments/webgl-gpgpu/webgl.html">floating-point export workaround</a>).</li>
          <li>Distance fields for water glass (and consider elliptical acceleration). Milk with BSSRDF?</li>
          <li>Use textures and multi-pass for rendering many-triangled objects.</li>
          <li>Consider persistent texture for improved PRNG</li>
          <li>Spectral rendering, consider polarization and thin-film support for realistic camera model (with multipass!)</li>
          <li>4D experimentation</li>
        </ul>
        Like it? Send me your thoughts at <a id="email" href="mailto:jonathan.olson@colorado.edu">jonathan.olson@colorado.edu</a>

      </div>
      </div>
    </div> <!-- tab content end -->

    </div> <!-- container right end -->
  </div> <!-- main container end -->
  <script src="../js/main_first.js"></script>
  <script src="../js/tesserace.js"></script>
  <script src="../js/snippets.js"></script>
  <script src="../js/traceables3.js"></script>
  <script src="../js/materials3.js"></script>
  <script src="../js/scene3.js"></script>
  <script src="../js/main_second.js"></script>
  <a href="https://github.com/jonathanolson/tesserace"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 40;" alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
  <img class="hidden" src="../images/oak1-diffuse-2048.jpg" alt="oak1-diffuse-2048" id="oak1-diffuse-2048"/>
  <img class="hidden" src="../images/oak1-dirt-2048.jpg" alt="oak1-dirt-2048" id="oak1-dirt-2048"/>
  <img class="hidden" src="../images/oak1-dot3-4096.jpg" alt="oak1-dot3-4096" id="oak1-dot3-4096"/>
</body>
</html>
