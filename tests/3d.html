<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <link href="../css/main.css" rel="stylesheet">
  <title>Tesserace 3D Test</title>
  <!-- Can be ordered operations -->
  <script src="../lib/lodash-2.4.1.min.js"></script>
  <script type="text/javascript">
    var oldArray64 = window.Float64Array;
    window.Float64Array = window.Float32Array;
  </script>
  <link href="https://cdn.rawgit.com/band-x-media/SASS-Material-Design-for-Bootstrap/master/dist/material-bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="https://cdn.rawgit.com/band-x-media/SASS-Material-Design-for-Bootstrap/master/dist/material-bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="../lib/dot.min.js"></script>
  <script type="text/javascript">
    window.Float64Array = oldArray64;
  </script>
  <!-- END Can be ordered operations -->
</head>
<body>
  <div id="main-container">
    <div id="container-left">
        <canvas class="shadow" id="canvas" width="700" height="512"></canvas>
        <div id="statusContainer"><span id="status">Loading ...</span></div> 
  </div>

    <div id="container-right">
    <div class="sticky-header">
      <ul class="nav nav-tabs nav-justified nav-tab-yellow" >
      <li class="nav-item active"><a data-toggle="tab" href="#home">Home</a></li>
      <li class="nav-item "><a data-toggle="tab" href="#menu1">Menu 1</a></li>
      <li class="nav-item "><a data-toggle="tab" href="#menu2">Menu 2</a></li>
      <li class="nav-item "><a data-toggle="tab" href="#menu3">Menu 3</a></li>
      </ul>
    </div>
    <div id="controls">
        <div class="h">Movement Controls</div>
        WASD for forwards/backwards/sideways motion, arrow keys to rotate, and Q/E to roll.
        <div class="h">Scene</div>
        <label for="sceneCoffeeBox">
          <input autocomplete="off" type="radio" name="sceneChoice" id="sceneCoffeeBox" checked>Outdoors</input>
        </label>
        <label for="sceneIndoorBox">
          <input autocomplete="off" type="radio" name="sceneChoice" id="sceneIndoorBox">Indoors</input>
        </label>
        <label for="sceneColorBox">
          <input autocomplete="off" type="radio" name="sceneChoice" id="sceneColorBox">Color and Caustics</input>
        </label>
        <label for="sceneTestBox">
          <input autocomplete="off" type="radio" name="sceneChoice" id="sceneTestBox">Distance Field Experiment (slow!)</input>
        </label>
        <div class="h">Tone Mapping</div>
        <label for="linearBox">
          <input autocomplete="off" type="radio" name="toneMap" id="linearBox" checked>Linear</input>
        </label>
        <label for="reinhardBox">
          <input autocomplete="off" type="radio" name="toneMap" id="reinhardBox">Reinhard</input>
        </label>
        <label for="filmicBox">
          <input autocomplete="off" type="radio" name="toneMap" id="filmicBox">Filmic</input>
        </label>
        <br>
        <label for="brightness">Exposure</label>
        <input autocomplete="off" id="brightnessSlider" name="brightness" type="range" min="0" max="500" value="100" step="1" />
        <div class="h">Depth of Field</div>
        (perspective only for now)<br>
        <label for="dofSpread">Blur Amount</label>
        <input autocomplete="off" id="dofSpreadSlider" name="dofSpread" type="range" min="0" max="500" value="0" step="1" />
        <br>
        <label for="focalLength">Focal Length</label>
        <input autocomplete="off" id="focalLengthSlider" name="focalLength" type="range" min="0" max="1000" value="150" step="0.5" />
        <div class="h">Projection</div>
        <label for="perspectiveBox">
          <input autocomplete="off" type="radio" name="projection" id="perspectiveBox" checked>Perspective</input>
        </label>
        <label for="stereographicBox">
          <input autocomplete="off" type="radio" name="projection" id="stereographicBox">Stereographic</input>
        </label>
        <div class="h">Mouse Control</div>
        <label for="mouseNoneBox">
          <input autocomplete="off" type="radio" name="mouseControl" id="mouseNoneBox">Nothing</input>
        </label>
        <br>
        <label for="mouseRotateBox">
          <input autocomplete="off" type="radio" name="mouseControl" id="mouseRotateBox" checked>Rotate (around focal point)</input>
        </label>
        <br>
        <label for="mouseFocusBox">
          <input autocomplete="off" type="radio" name="mouseControl" id="mouseFocusBox">Focus on point (when clicked or dragged)</input>
        </label>
        <br>
        <label for="mouseLightBox">
          <input autocomplete="off" type="radio" name="mouseControl" id="mouseLightBox">Light at point (when clicked or dragged)</input>
        </label>
        <br>
        <label for="mouseMakeDynamicBox">
          <input autocomplete="off" type="radio" name="mouseControl" id="mouseMakeDynamicBox">Drag spheres (not too many, shader uniforms limited)</input>
        </label>
        <div class="h">Environment</div>
        <label for="envConstantBox">
          <input autocomplete="off" type="radio" name="environmentControl" id="envConstantBox">Constant (white/gray)</input>
        </label>
        <br>
        <label for="envWeirdBox">
          <input autocomplete="off" type="radio" name="environmentControl" id="envWeirdBox">Custom GLSL Expression</input>
          <br>
          <input autocomplete="off" type="text" name="customGLSLText" id="customGLSLText" value="pow( abs( 1.0 + sin( 50.0 * asin( rayDir.x ) ) * sin( 50.0 * asin( rayDir.z ) ) ), 7.0 ) * 0.15" style="margin-left: 20px;"></input>
          <button id="updateCustomGLSLButton">Update</button>
        </label>
        <br>
        HDR Skies downsampled from <a href="http://www.viz-people.com/portfolio/free-hdri-maps/">Vizpeople's free (non-commercial) environment maps</a>:
        <br>
        <label for="envTest01">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest01">Sky 01 (2048x512)</input>
        </label>
        <label for="envTest01x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest01x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest02">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest02">Sky 02 (2048x512)</input>
        </label>
        <label for="envTest02x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest02x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest03">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest03">Sky 03 (2048x512)</input>
        </label>
        <label for="envTest03x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest03x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest04">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest04" checked>Sky 04 (2048x512)</input>
        </label>
        <label for="envTest04x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest04x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest05">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest05">Sky 05 (2048x512)</input>
        </label>
        <label for="envTest05x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest05x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest06">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest06">Sky 06 (2048x512)</input>
        </label>
        <label for="envTest06x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest06x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest07">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest07">Sky 07 (2048x512)</input>
        </label>
        <label for="envTest07x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest07x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest08">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest08">Sky 08 (2048x512)</input>
        </label>
        <label for="envTest08x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest08x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest09">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest09">Sky 09 (2048x512)</input>
        </label>
        <label for="envTest09x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest09x">(4096x1024)</input>
        </label>
        <br>
        <label for="envTest10">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest10">Sky 10 (2048x512)</input>
        </label>
        <label for="envTest10x">
          <input autocomplete="off" type="radio" name="environmentControl" id="envTest10x">(4096x1024)</input>
        </label>
        <br>
        HDR Skies from <a href="hhttp://www.openfootage.net/">openfootage.net free (attribution) environment maps</a>:
        <br>
        <label for="envDusk2048Box">
          <input autocomplete="off" type="radio" name="environmentControl" id="envDusk2048Box">Dusk (2048x512)</input>
        </label>
        <br>
        <label for="environmentRotation">Rotation</label>
        <input autocomplete="off" id="environmentRotationSlider" name="environmentRotation" type="range" min="0" max="360" value="297" step="0.5" />
        <br>
        <label for="environmentSunStrength">Extra Sun</label>
        <input autocomplete="off" id="environmentSunStrengthSlider" name="environmentSunStrength" type="range" min="0" max="100" value="0" step="0.5" />
        <div class="h">Size</div>
        <button autocomplete="off" type="radio" name="sizeChoice" id="size256Box">256px</button>
        <button autocomplete="off" type="radio" name="sizeChoice" id="size512Box">512px</button>
        <button autocomplete="off" type="radio" name="sizeChoice" id="size1024Box">1024px</button>
        <div class="h">Future Thoughts</div>
        <ul>
          <li>Scale down to other aspect ratios / non-power-of-2-sizes</li>
          <li>Other tone mapping options (Reinhard)?</li>
          <li>Filtering to remove aliasing</li>
          <li>Improved importance sampling</li>
          <li>Bloom shader (mipmap down, blur with separable kernel at each stage after thresholding for brightness).</li>
          <li>Variance output (<a href="http://www.johndcook.com/standard_deviation.html">trackable with 2 floats</a>).</li>
          <li>HDRI export (<a href="http://concord-consortium.github.io/lab/experiments/webgl-gpgpu/webgl.html">floating-point export workaround</a>).</li>
          <li>Distance fields for water glass (and consider elliptical acceleration). Milk with BSSRDF?</li>
          <li>Use textures and multi-pass for rendering many-triangled objects.</li>
          <li>Consider persistent texture for improved PRNG</li>
          <li>Spectral rendering, consider polarization and thin-film support for realistic camera model (with multipass!)</li>
        <li>4D experimentation</li>
        </ul>
      Like it? Send me your thoughts at <a id="email" href="mailto:jonathan.olson@colorado.edu">jonathan.olson@colorado.edu</a>
    </div>
  </div>
  </div>
  <script src="../js/main_first.js"></script>
  <script src="../js/tesserace.js"></script>
  <script src="../js/snippets.js"></script>
  <script src="../js/traceables3.js"></script>
  <script src="../js/materials3.js"></script>
  <script src="../js/scene3.js"></script>
  <script src="../js/main_second.js"></script>
  <a href="https://github.com/jonathanolson/tesserace"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 40;" alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
  <img class="hidden" src="../images/oak1-diffuse-2048.jpg" alt="oak1-diffuse-2048" id="oak1-diffuse-2048"/>
  <img class="hidden" src="../images/oak1-dirt-2048.jpg" alt="oak1-dirt-2048" id="oak1-dirt-2048"/>
  <img class="hidden" src="../images/oak1-dot3-4096.jpg" alt="oak1-dot3-4096" id="oak1-dot3-4096"/>
</body>
</html>
